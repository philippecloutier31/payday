# BlockCypher API Configuration
# Get your API token from https://accounts.blockcypher.com/
BLOCKCYPHER_API_TOKEN=your-blockcypher-api-token

# BlockCypher API URL (default: https://api.blockcypher.com/v1)
# Use https://api.blockcypher.com/v1 for mainnet
# For testing, you can use test networks: btc/test3, beth/test
BLOCKCYPHER_API_URL=https://api.blockcypher.com/v1

# Ethereum RPC Provider URLs (required for ETH transactions)
# Free options: https://eth.llamarpc.com (no auth), https://ethereum-rpc.publicnode.com
# Paid/Free tier: https://mainnet.infura.io/v3/YOUR_PROJECT_ID (Infura), https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY (Alchemy)
ETH_RPC_URL=https://eth.llamarpc.com
# For testnet (Goerli or Sepolia)
BETH_RPC_URL=https://goerli.infura.io/v3/YOUR_PROJECT_ID

# Transaction Fee Configuration (optional)
# BTC mainnet fee rate in satoshis per byte (default: 3)
BTC_FEE_RATE_SATS_PER_BYTE=3
# BCY testnet fee rate in satoshis per byte (default: 1)
BCY_FEE_RATE_SATS_PER_BYTE=1

# Server Configuration
PAYMENT_PORT=3001
NODE_ENV=development

# Webhook Configuration
# This should be your publicly accessible URL for receiving webhooks
WEBHOOK_BASE_URL=https://your-domain.com

# Webhook Secret for BlockCypher -> Payment Gateway authentication
# This secret is included as a query parameter in the callback URL when registering webhooks.
# When BlockCypher sends webhook notifications, they POST to the exact URL we provided,
# including this secret. We validate it to ensure the webhook is authentic.
# 
# IMPORTANT: Generate a strong, random secret for production!
# Example: openssl rand -hex 32
PAYMENT_WEBHOOK_SECRET=your-secure-webhook-secret
# A 12 or 24 word mnemonic phrase to derive all payment addresses locally
# Keep this extremely secure!
MASTER_SEED_PHRASE=your-12-word-mnemonic-phrase-here-change-me

# Main Wallet Addresses (where forwarded funds will go)
BTC_MAIN_ADDRESS=your-btc-main-address
ETH_MAIN_ADDRESS=your-eth-main-address
# For BCY (Bitcoin test chain), you can use TEST_RECEIVING_ADDRESS or set a specific one
BCY_MAIN_ADDRESS=your-bcy-test-address
# For BETH (Ethereum test chain), you can use TEST_RECEIVING_ADDRESS or set a specific one
BETH_MAIN_ADDRESS=your-beth-test-address

# Confirmation Thresholds
# Number of confirmations required before marking payment as confirmed
BTC_CONFIRMATIONS_REQUIRED=3
ETH_CONFIRMATIONS_REQUIRED=12
BCY_CONFIRMATIONS_REQUIRED=1
BETH_CONFIRMATIONS_REQUIRED=1

# Payment Session Expiry (in milliseconds)
# Default: 3600000 (1 hour)
SESSION_EXPIRY_MS=3600000

# Main Backend Configuration
# URL of the main CF-Finder backend to notify when payments complete
MAIN_BACKEND_URL=http://localhost:5000

# Webhook secret for Payment Gateway -> Main Backend authentication
# This MUST match the WEBHOOK_SECRET in the main backend's .env
# Used to authenticate callbacks when notifying the backend about payment completions
MAIN_BACKEND_WEBHOOK_SECRET=your-main-backend-webhook-secret

# =============================================================================
# Test Wallet Configuration (BlockCypher Test Chain - bcy/test)
# =============================================================================
# These wallets are used for testing the payment workflow with npm run dev:test:workflow
# Generate test wallets at: https://api.blockcypher.com/v1/bcy/test/addrs (POST request with your token)
#
# TEST SENDING ADDRESS - Wallet that sends test transactions
# This wallet needs to be funded via the BCY faucet before testing
# Faucet: POST https://api.blockcypher.com/v1/bcy/test/faucet?token=YOUR_TOKEN
#         Body: {"address": "YOUR_TEST_SENDING_ADDRESS", "amount": 1000000}
TEST_SENDING_PRIVATE_KEY=your-test-sending-private-key
TEST_SENDING_PUBLIC_KEY=your-test-sending-public-key
TEST_SENDING_ADDRESS=your-test-sending-address
TEST_SENDING_WIF=your-test-sending-wif

# TEST RECEIVING ADDRESS - Destination for forwarded funds in test workflow
TEST_RECEIVING_PRIVATE_KEY=your-test-receiving-private-key
TEST_RECEIVING_PUBLIC_KEY=your-test-receiving-public-key
TEST_RECEIVING_ADDRESS=your-test-receiving-address
TEST_RECEIVING_WIF=your-test-receiving-wif
